# 数据库安全说明

## 问题修复

之前的版本中，每次运行 `npm run dev` 都会自动重置数据库并删除所有数据。这个问题已经被修复。

## 当前行为

- **正常启动**: `npm run dev` 现在只会运行数据库迁移，不会删除现有数据
- **数据保护**: 你的数据库数据现在是安全的，不会在启动时被意外删除

## 如何手动重置数据库

如果你确实需要重置数据库（删除所有数据），可以使用以下命令：

```bash
# 设置环境变量并启动（这会重置数据库）
FORCE_DB_RESET=true npm run dev
```

或者单独运行迁移脚本：

```bash
# 重置数据库
FORCE_DB_RESET=true tsx scripts/db-migrate.ts
```

## 注意事项

⚠️ **警告**: 只有在你确定要删除所有数据时才使用 `FORCE_DB_RESET=true`

✅ **安全**: 正常的 `npm run dev` 现在是安全的，不会删除你的数据

## 数据备份建议

在进行任何可能影响数据的操作之前，建议：

1. 备份重要数据
2. 在测试环境中先验证更改
3. 使用数据库管理工具定期导出数据