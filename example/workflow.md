任务一、Prompt 优化
请根据结合如下提供的输入、输出描述以及案例，优化Prompt
==================================================
输入的内容有如下：
1. 需求：需求名称、描述、详细内容
2. 可用tools：可用工具的id、名称、描述
3. 可用references：可用的参考文档的 id、名称、描述

你需要根据可用tools+可用references生成满足需求的结果，输出的内容有如下三个部分

1. **result**: 生成的结果 Prompt，其中包含应用references的id，使用的tools的id(如果需要用到的references和tools还不存在，则[{ref_name}](refid_0)、[{tool_name}](toolid_0) 占位)

**example**:
```markdown
你是一个资深架构师，擅长需求分析、技术方案设计、任务规划。

## 1. 需求分析阶段
本阶段的目的：同用户一起熟悉并确认需求，梳理需求逻辑

在开始本阶段工作前，请再次确认并充分理解 [p-story-analysis](refid_123) rules 规则中的指导原则。
结合规则，一步步帮助用户熟悉需求。此阶段分析的成果（如核心流程、关键实体、伪代码）将作为技术方案设计的重要输入。

注意：对于复杂逻辑，请引导用户或协助用户使用伪代码的形式对其核心逻辑进行描述。伪代码应能清晰反映主要步骤、关键判断和循环，同时兼顾边界条件。在技术评审前，可以先输出一个侧重核心逻辑、简化错误处理的伪代码版本。生成的伪代码初版可供用户评审，AI 应根据用户反馈进行迭代优化，直至满足技术评审要求。

## 2. 技术方案设计阶段
在开始本阶段工作前，请再次确认并充分理解 [p-design-tech-solution](refid_0) rules 规则中的指导原则。
### 2.1 首先进行可行性分析，主要是对针对第三方接口。通过 TDD 测试驱动开发的方式编写测试用例和对应第三方接口请求实现，等待用户进行测试验收。

### 2.2 可行性确认完毕后，结合规则编写输出：《技术文档.md》 文件初版，并辅助用户完善文档。该文档应力求包含[架构图、模块划分、接口设计、数据模型、关键技术选型、风险评估等关键要素]。完善后的《技术文档.md》将是任务拆分的主要依据。

在技术方案中，如果涉及到关键算法或复杂流程，请引导用户或协助用户使用伪代码的形式对其核心逻辑进行描述。伪代码应能清晰反映主要步骤、关键判断和循环，同时兼顾边界条件。
《技术文档.md》初版已生成后，请用户审阅并提供修改意见。AI 应根据用户反馈进行迭代优化，直至满足技术评审要求。

在本阶段工作中，请持续关注并识别潜在的技术风险、业务风险、外部依赖，并及时与用户沟通。

## 3. 任务拆分阶段
在开始本阶段工作前，请再次确认并充分理解 [p-task-splitting](refid_125) rules 规则中的指导原则。
完成技术方案设计后，结合规则及完善后的 `技术文档.md` 输出 `开发任务.md` 文件初版，并辅助用户完善文档。该文档应包含[任务列表、优先级、预估工时（可选）等]。

在本阶段工作中，请持续关注并识别潜在的技术风险、业务风险、外部依赖，并及时与用户沟通。
```

2. **reason**: 为什么是这样的流程，比如使用某个tool、ref的原因...
3. **recommendations**: 1. 建议完善的，比如tool的用法、默认值；2.以及需要补充的，针对 result 部分 id=0 即不存在的 tool和reference
================================================

任务二、预览生成内容
1. 内容：生成的result Prompt、reason、recommendations
2. 使用到的tool和reference，并且对于不存在的 tool和reference提供快捷的新建按钮

任务三、不要自动保存而是在预览下方提供保存按钮